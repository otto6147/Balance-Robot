# Self-Balancing Robot with PID & IR Control

โปรเจกต์นี้คือการสร้างหุ่นยนต์สองล้อทรงตัวอัตโนมัติ (Self-Balancing Robot) โดยใช้เซนเซอร์ **MPU6050** ในการวัดความเอียง และใช้ระบบควบคุมแบบ **PID Controller** เพื่อประมวลผลการทรงตัว พร้อมทั้งรองรับการควบคุมทิศทางผ่าน **IR Remote**

## อุปกรณ์ที่ใช้ (Hardware)

* **Microcontroller:** Arduino (Uno/Nano หรือที่รองรับ)
* **IMU Sensor:** MPU6050 (Gyroscope + Accelerometer)
* **Motor Driver:** L298N หรือรุ่นที่ใกล้เคียง (ใช้ขา ENA, ENB เพื่อคุมความเร็วแบบ PWM)
* **Remote Control:** IR Remote & IR Receiver
* **Motors:** DC Gear Motors x2

## การเชื่อมต่อพิน (Pin Mapping)

| อุปกรณ์ | พิน Arduino | หน้าที่ |
| --- | --- | --- |
| **IR Receiver** | 4 | รับสัญญาณจากรีโมท |
| **L298N ENA** | 5 | ควบคุมความเร็วล้อซ้าย (PWM) |
| **L298N ENB** | 6 | ควบคุมความเร็วล้อขวา (PWM) |
| **L298N IN1, IN2** | 13, 12 | ควบคุมทิศทางล้อซ้าย |
| **L298N IN3, IN4** | 9, 8 | ควบคุมทิศทางล้อขวา |
| **MPU6050** | A4 (SDA), A5 (SCL) | เชื่อมต่อผ่าน I2C |

## ระบบการทำงาน (Core Logic)

### 1. PID Control System

ระบบใช้สมการ PID เพื่อคำนวณกำลังของมอเตอร์เพื่อให้หุ่นยนต์กลับเข้าสู่จุดสมดุล ( องศา):

* **P (Proportional):** ตอบสนองตามขนาดของความเอียงในปัจจุบัน ()
* **I (Integral):** สะสมค่าความผิดพลาดเพื่อกำจัดแรงเสียดทานหรือความไม่สมดุลถาวร ()
* **D (Derivative):** ทำนายแนวโน้มความเอียงเพื่อลดการแกว่ง ()

### 2. IR Remote Commands

หุ่นยนต์สามารถเคลื่อนที่ได้โดยการปรับค่า `speedOffset` และ `turnOffset` ผ่านรีโมท:

* **Forward / Backward:** ปรับความเร็วพื้นฐานเพื่อให้หุ่นยนต์โน้มตัวไปข้างหน้าหรือหลัง
* **Left / Right:** ปรับความเร็วของล้อซ้ายและขวาให้ต่างกันเพื่อให้หุ่นยนต์หมุนตัว
* **Stop:** คืนค่า Offset เป็น 0 เพื่อให้กลับมาทรงตัวอยู่นิ่งๆ

## การใช้งาน (How to use)

1. ติดตั้ง Library `MPU6050_tockn`, `Wire`, และ `IRremote` ใน Arduino IDE
2. ปรับแต่งค่า `mpu6050.setGyroOffsets` ให้เหมาะกับตำแหน่งการวางเซนเซอร์ของหุ่นยนต์คุณ
3. หากหุ่นยนต์ล้มหรือแกว่งเกินไป ให้ปรับค่า **kp, ki, kd** ในโค้ดเพื่อจูนให้เหมาะสม (PID Tuning)
4. ตรวจสอบรหัสปุ่มรีโมท (Hex Code) ในฟังก์ชัน `loop` หากใช้รีโมทรุ่นอื่นอาจต้องแก้ไขค่า Case ให้ตรงกัน
